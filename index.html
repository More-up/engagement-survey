<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engagement Survey - Powered by More-Up</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- ============================== 
             ホームページ 
        ============================== -->
        <div id="home" class="page active">
            <header>
                <h1>Engagement Survey</h1>
                <p class="subtitle">Powered by More-Up</p>
            </header>

            <div class="hero">
                <h2>あなたの働きがいを見える化します</h2>
                <p>100の質問で、仕事への満足度を多角的に診断</p>
                <button class="btn-primary" onclick="showPage('orientation')">診断を開始する</button>
            </div>

            <div class="features">
                <div class="feature-card">
                    <h3>📊 9つの視点</h3>
                    <p>仕事の充実感、成長機会、心身の健康、上司サポートなど</p>
                </div>
                <div class="feature-card">
                    <h3>⏱️ 約15～20分</h3>
                    <p>じっくり振り返りながら回答できます</p>
                </div>
                <div class="feature-card">
                    <h3>📈 詳細レポート</h3>
                    <p>総合スコアとカテゴリー別の結果を表示</p>
                </div>
            </div>
        </div>

        <!-- ============================== 
             オリエンテーション 
        ============================== -->
        <div id="orientation" class="page">
            <header>
                <h1>診断について</h1>
            </header>

            <div class="content-card">
                <h2>この診断でわかること</h2>
                <ul>
                    <li>あなたの仕事への満足度（総合スコア）</li>
                    <li>9つのカテゴリー別の詳細スコア</li>
                    <li>強みと改善ポイントのフィードバック</li>
                    <li>過去の診断結果との比較（履歴機能）</li>
                </ul>

                <h2 style="margin-top: 40px;">回答方法</h2>
                <ul>
                    <li>各質問に対して5段階で評価してください</li>
                    <li>上から「強くそう思う」→「そう思う」→「どちらでもない」→「そう思わない」→「全くそう思わない」の順です</li>
                    <li>正直な気持ちで回答することが大切です</li>
                    <li>全100問、約15～20分で完了します</li>
                </ul>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn-primary" onclick="completeOrientation()">理解しました。次へ</button>
                </div>
            </div>
        </div>

        <!-- ============================== 
             部署選択ページ 
        ============================== -->
        <div id="department-selection" class="page">
            <header>
                <h1>診断情報の入力</h1>
            </header>

            <div class="content-card">
                <h2>従業員コードと部署を入力してください</h2>

                <!-- 従業員コード説明 -->
                <div class="info-box" style="margin-bottom: 30px;">
                    <strong>📌 従業員コードについて</strong><br>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>重複回答を防ぐために必要です</li>
                        <li>回答率の管理に使用します</li>
                        <li>データの信頼性向上に役立ちます</li>
                    </ul>
                    <p style="margin-top: 10px; color: #666;">
                        ※ 回答内容は匿名で集計され、個人は特定されません。データ管理は株式会社モアップのみが行います。
                    </p>
                </div>

                <!-- 従業員コード入力 -->
                <div style="margin-bottom: 30px;">
                    <label for="employee-code" style="display: block; margin-bottom: 10px; font-weight: 600;">
                        従業員コード <span style="color: red;">*必須</span>
                    </label>
                    <input 
                        type="text" 
                        id="employee-code" 
                        class="employee-code-input" 
                        placeholder="例: ABC123"
                        required
                    >
                </div>

                <!-- 部署選択 -->
                <div style="margin-bottom: 40px;">
                    <label for="department" style="display: block; margin-bottom: 10px; font-weight: 600;">
                        所属部署 <span style="color: red;">*必須</span>
                    </label>
                    <select id="department" class="department-select" required>
                        <option value="">-- 部署を選択してください --</option>
                        <option value="営業部">営業部</option>
                        <option value="企画部">企画部</option>
                        <option value="開発部">開発部</option>
                        <option value="管理部">管理部</option>
                        <option value="人事部">人事部</option>
                        <option value="その他">その他</option>
                    </select>
                </div>

                <div style="text-align: center;">
                    <button class="btn-primary" onclick="saveDepartmentAndStart()">診断を開始する</button>
                </div>
            </div>
        </div>

        <!-- ============================== 
             診断ページ 
        ============================== -->
        <div id="survey" class="page">
            <header>
                <h1>エンゲージメント診断</h1>
            </header>

            <div class="survey-container">
                <!-- 進捗バー -->
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p id="progress-text" class="progress-text">質問 1 / 100</p>

                <!-- カテゴリーヘッダー -->
                <div id="category-header" class="category-header">
                    カテゴリー
                </div>

                <!-- 質問カード -->
                <div class="question-card">
                    <h3 id="question-title">質問文がここに表示されます</h3>

                    <div id="options-container" class="options">
                        <!-- 選択肢が動的に生成されます -->
                    </div>
                </div>

                <!-- ナビゲーション -->
                <div class="navigation">
                    <button id="prev-btn" class="btn-secondary" onclick="previousQuestion()" style="display: none;">前へ</button>
                    <button class="btn-primary" onclick="nextQuestion()">次へ</button>
                </div>
            </div>
        </div>

        <!-- ============================== 
             結果ページ 
        ============================== -->
        <div id="results" class="page">
            <div class="results-header">
                <h2>診断結果</h2>
            </div>

            <div class="results-grid">
                <!-- 総合スコア -->
                <div class="result-card">
                    <h3>総合スコア</h3>
                    <div id="total-score" class="total-score">0</div>
                    <p class="score-label">/ 100点</p>
                    
                    <!-- 診断情報 -->
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee; text-align: left;">
                        <p style="margin-bottom: 10px;"><strong>従業員コード:</strong> <span id="employee-code-display">-</span></p>
                        <p style="margin-bottom: 10px;"><strong>部署:</strong> <span id="department-display">-</span></p>
                        <p><strong>診断日:</strong> <span id="survey-date-display">-</span></p>
                    </div>
                </div>

                <!-- カテゴリー別スコア -->
                <div class="result-card">
                    <h3>カテゴリー別スコア</h3>
                    <div id="category-scores">
                        <!-- スコアが動的に生成されます -->
                    </div>
                </div>

                <!-- レーダーチャート -->
                <div class="result-card chart-card">
                    <h3>スコア分布</h3>
                    <canvas id="radar-chart"></canvas>
                </div>

                <!-- フィードバック -->
                <div class="result-card">
                    <h3>総合フィードバック</h3>
                    <div id="feedback-text" class="feedback-good">
                        フィードバックがここに表示されます
                    </div>
                </div>
            </div>

            <!-- 結果画面のボタン -->
            <div style="text-align: center; margin-top: 40px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button class="btn-primary" onclick="printResults()">📄 結果を印刷</button>
                <button class="btn-primary" onclick="showHistory()">📊 過去の診断履歴</button>
                <button class="btn-secondary" onclick="completeSurvey()">診断を完了する</button>
            </div>
        </div>

        <!-- ============================== 
             履歴ページ 
        ============================== -->
        <div id="history" class="page">
            <header>
                <h1>過去の診断履歴</h1>
            </header>

            <div class="content-card">
                <div id="history-list">
                    <!-- 履歴が動的に生成されます -->
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn-secondary" onclick="showPage('home')">トップに戻る</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript読み込み -->
    <script src="js/questions.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
