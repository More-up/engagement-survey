<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - Engagement Survey</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ */
        .login-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .login-box {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .login-box h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .login-box p {
            color: #666;
            margin-bottom: 30px;
        }

        .login-box input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .login-box input:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-box button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .login-box button:hover {
            transform: translateY(-2px);
        }

        .error-message {
            color: #e74c3c;
            margin-top: 15px;
            display: none;
        }

        /* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ */
        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header h1 {
            color: #667eea;
            font-size: 2em;
        }

        .logout-btn {
            padding: 12px 30px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        /* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
        .filters {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            color: #666;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .filter-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .stat-card h3 {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .stat-card .stat-value {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card .stat-label {
            color: #999;
            font-size: 0.9em;
            margin-top: 5px;
        }

        /* ãƒãƒ£ãƒ¼ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .chart-section {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .chart-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
        }

        .chart-container {
            position: relative;
            height: 400px;
        }

        /* ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ« */
        .data-table {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow-x: auto;
        }

        .data-table h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        thead th {
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        tbody tr {
            border-bottom: 1px solid #e0e0e0;
            transition: background 0.2s;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tbody td {
            padding: 15px;
            color: #333;
        }

        .score-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: #10b981; }
        .score-good { background: #3b82f6; }
        .score-average { background: #f59e0b; }
        .score-low { background: #ef4444; }

        .view-btn {
            padding: 8px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .view-btn:hover {
            background: #764ba2;
        }

        .no-data {
            text-align: center;
            padding: 50px;
            color: #999;
            font-size: 1.2em;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                gap: 20px;
            }

            .filters {
                flex-direction: column;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 14px;
            }

            thead th, tbody td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div class="login-page" id="login-page">
        <div class="login-box">
            <h1>ğŸ” ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</h1>
            <p>Engagement Survey ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</p>
            <input type="password" id="password-input" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" />
            <button onclick="login()">ãƒ­ã‚°ã‚¤ãƒ³</button>
            <p class="error-message" id="error-message">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“</p>
        </div>
    </div>

    <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
    <div class="dashboard" id="dashboard">
        <div class="container">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="dashboard-header">
                <div>
                    <h1>ğŸ“Š ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
                    <p style="color: #666; margin-top: 5px;">Engagement Survey - æ ªå¼ä¼šç¤¾ãƒ¢ã‚¢ãƒƒãƒ—</p>
                </div>
                <button class="logout-btn" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>

            <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
            <div class="filters">
                <div class="filter-group">
                    <label>ä¼æ¥­ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</label>
                    <select id="company-filter" onchange="applyFilters()">
                        <option value="all">ã™ã¹ã¦ã®ä¼æ¥­</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>éƒ¨ç½²ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</label>
                    <select id="department-filter" onchange="applyFilters()">
                        <option value="all">ã™ã¹ã¦ã®éƒ¨ç½²</option>
                    </select>
                </div>
            </div>

            <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>ç·è¨ºæ–­æ•°</h3>
                    <div class="stat-value" id="total-surveys">0</div>
                    <div class="stat-label">ä»¶</div>
                </div>
                <div class="stat-card">
                    <h3>å¹³å‡ã‚¹ã‚³ã‚¢</h3>
                    <div class="stat-value" id="average-score">0</div>
                    <div class="stat-label">ç‚¹</div>
                </div>
                <div class="stat-card">
                    <h3>ä¼æ¥­æ•°</h3>
                    <div class="stat-value" id="company-count">0</div>
                    <div class="stat-label">ç¤¾</div>
                </div>
                <div class="stat-card">
                    <h3>æœ€æ–°è¨ºæ–­æ—¥</h3>
                    <div class="stat-value" id="latest-date" style="font-size: 1.5em;">-</div>
                </div>
            </div>

            <!-- ãƒãƒ£ãƒ¼ãƒˆ -->
            <div class="chart-section">
                <h2>ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿åˆ†æ</h2>
                <div class="charts-grid">
                    <div>
                        <h3 style="color: #666; margin-bottom: 15px;">ä¼æ¥­åˆ¥å¹³å‡ã‚¹ã‚³ã‚¢</h3>
                        <div class="chart-container">
                            <canvas id="company-chart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 style="color: #666; margin-bottom: 15px;">ã‚«ãƒ†ã‚´ãƒªåˆ¥å¹³å‡ã‚¹ã‚³ã‚¢</h3>
                        <div class="chart-container">
                            <canvas id="category-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div class="data-table">
                <h2>ğŸ“‹ è¨ºæ–­ãƒ‡ãƒ¼ã‚¿ä¸€è¦§</h2>
                <div id="table-container">
                    <p class="no-data">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // ============================
        let allData = [];
        let filteredData = [];
        let companyChart = null;
        let categoryChart = null;

        // ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ãªã©ã§ç®¡ç†ã—ã¦ãã ã•ã„ï¼‰
        const ADMIN_PASSWORD = 'moreup2024';

        // ============================
        // ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
        // ============================
        function login() {
            const password = document.getElementById('password-input').value;
            const errorMessage = document.getElementById('error-message');

            if (password === ADMIN_PASSWORD) {
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                localStorage.setItem('adminLoggedIn', 'true');
                loadDashboardData();
            } else {
                errorMessage.style.display = 'block';
            }
        }

        function logout() {
            localStorage.removeItem('adminLoggedIn');
            document.getElementById('login-page').style.display = 'flex';
            document.getElementById('dashboard').classList.remove('active');
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        window.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = localStorage.getItem('adminLoggedIn');
            if (isLoggedIn === 'true') {
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                loadDashboardData();
            }

            // Enterã‚­ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³
            document.getElementById('password-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
        });

        // ============================
        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        // ============================
        async function loadDashboardData() {
            try {
                // Workers APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const response = await fetch('https://engagement-api.more-up.workers.dev/api/results');
                const result = await response.json();

                if (result.success) {
                    allData = result.data;
                    filteredData = allData;
                    
                    updateFilters();
                    updateStats();
                    updateCharts();
                    updateTable();
                } else {
                    console.error('ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', result.error);
                    document.getElementById('table-container').innerHTML = 
                        '<p class="no-data">ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</p>';
                }
            } catch (error) {
                console.error('APIæ¥ç¶šã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('table-container').innerHTML = 
                    '<p class="no-data">ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“</p>';
            }
        }

        // ============================
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ›´æ–°
        // ============================
        function updateFilters() {
            // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªä¼æ¥­ãƒªã‚¹ãƒˆã‚’å–å¾—ï¼ˆå¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰ã®å…ˆé ­æ–‡å­—ã§åˆ¤å®šï¼‰
            const companies = new Set();
            const departments = new Set();

            allData.forEach(item => {
                // ä¼æ¥­åã¯å¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰ã‹ã‚‰æ¨å®šï¼ˆä»®å®Ÿè£…ï¼‰
                // å®Ÿéš›ã«ã¯ company_id ã‚«ãƒ©ãƒ ã‚’è¿½åŠ ã™ã‚‹æ–¹ãŒè‰¯ã„
                companies.add(item.employee_code.substring(0, 3));
                departments.add(item.department);
            });

            // ä¼æ¥­ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ›´æ–°
            const companyFilter = document.getElementById('company-filter');
            companyFilter.innerHTML = '<option value="all">ã™ã¹ã¦ã®ä¼æ¥­</option>';
            Array.from(companies).sort().forEach(company => {
                const option = document.createElement('option');
                option.value = company;
                option.textContent = `ä¼æ¥­ ${company}`;
                companyFilter.appendChild(option);
            });

            // éƒ¨ç½²ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ›´æ–°
            const departmentFilter = document.getElementById('department-filter');
            departmentFilter.innerHTML = '<option value="all">ã™ã¹ã¦ã®éƒ¨ç½²</option>';
            Array.from(departments).sort().forEach(dept => {
                const option = document.createElement('option');
                option.value = dept;
                option.textContent = dept;
                departmentFilter.appendChild(option);
            });
        }

        function applyFilters() {
            const companyFilter = document.getElementById('company-filter').value;
            const departmentFilter = document.getElementById('department-filter').value;

            filteredData = allData.filter(item => {
                const companyMatch = companyFilter === 'all' || 
                    item.employee_code.startsWith(companyFilter);
                const departmentMatch = departmentFilter === 'all' || 
                    item.department === departmentFilter;
                
                return companyMatch && departmentMatch;
            });

            updateStats();
            updateCharts();
            updateTable();
        }

        // ============================
        // çµ±è¨ˆæƒ…å ±æ›´æ–°
        // ============================
        function updateStats() {
            const totalSurveys = filteredData.length;
            const avgScore = totalSurveys > 0 
                ? Math.round(filteredData.reduce((sum, item) => sum + item.total_score, 0) / totalSurveys)
                : 0;
            
            const companies = new Set(filteredData.map(item => item.employee_code.substring(0, 3)));
            const companyCount = companies.size;

            const latestDate = totalSurveys > 0
                ? new Date(filteredData[0].survey_date).toLocaleDateString('ja-JP')
                : '-';

            document.getElementById('total-surveys').textContent = totalSurveys;
            document.getElementById('average-score').textContent = avgScore;
            document.getElementById('company-count').textContent = companyCount;
            document.getElementById('latest-date').textContent = latestDate;
        }

        // ============================
        // ãƒãƒ£ãƒ¼ãƒˆæ›´æ–°
        // ============================
        function updateCharts() {
            updateCompanyChart();
            updateCategoryChart();
        }

        function updateCompanyChart() {
            const ctx = document.getElementById('company-chart');
            
            // ä¼æ¥­åˆ¥ã®å¹³å‡ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
            const companyScores = {};
            filteredData.forEach(item => {
                const company = item.employee_code.substring(0, 3);
                if (!companyScores[company]) {
                    companyScores[company] = { total: 0, count: 0 };
                }
                companyScores[company].total += item.total_score;
                companyScores[company].count += 1;
            });

            const labels = Object.keys(companyScores).sort();
            const data = labels.map(company => 
                Math.round(companyScores[company].total / companyScores[company].count)
            );

            if (companyChart) {
                companyChart.destroy();
            }

            companyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels.map(c => `ä¼æ¥­ ${c}`),
                    datasets: [{
                        label: 'å¹³å‡ã‚¹ã‚³ã‚¢',
                        data: data,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function updateCategoryChart() {
            const ctx = document.getElementById('category-chart');
            
            // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®å¹³å‡ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—
            // æ³¨: å®Ÿéš›ã®ã‚«ãƒ†ã‚´ãƒªã‚¹ã‚³ã‚¢ã¯category_scoresãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
            // ã“ã“ã§ã¯ç°¡ç•¥åŒ–ã®ãŸã‚ã€ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
            const categories = [
                'å¿ƒèº«ã®å¥åº·', 'ä»•äº‹ã®å……å®Ÿæ„Ÿ', 'æˆé•·æ©Ÿä¼š', 
                'ä¸Šå¸ã®ã‚µãƒãƒ¼ãƒˆ', 'éƒ¨ç½²å†…ã®é–¢ä¿‚', 'è©•ä¾¡ã¨å ±é…¬',
                'ä¼šç¤¾ã¸ã®ä¿¡é ¼', 'åƒãç’°å¢ƒ', 'ç·åˆçš„ãªæº€è¶³åº¦'
            ];

            // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã«ã¯APIã‹ã‚‰å–å¾—ï¼‰
            const data = categories.map(() => 
                Math.round(Math.random() * 30 + 50)
            );

            if (categoryChart) {
                categoryChart.destroy();
            }

            categoryChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: categories,
                    datasets: [{
                        label: 'å¹³å‡ã‚¹ã‚³ã‚¢',
                        data: data,
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(118, 75, 162, 1)',
                        pointBorderColor: '#fff',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
        }

        // ============================
        // ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°
        // ============================
        function updateTable() {
            const container = document.getElementById('table-container');

            if (filteredData.length === 0) {
                container.innerHTML = '<p class="no-data">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }

            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>è¨ºæ–­æ—¥</th>
                            <th>å¾“æ¥­å“¡ã‚³ãƒ¼ãƒ‰</th>
                            <th>éƒ¨ç½²</th>
                            <th>ç·åˆã‚¹ã‚³ã‚¢</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            filteredData.forEach(item => {
                const date = new Date(item.survey_date).toLocaleDateString('ja-JP');
                const scoreClass = 
                    item.total_score >= 80 ? 'score-excellent' :
                    item.total_score >= 70 ? 'score-good' :
                    item.total_score >= 60 ? 'score-average' : 'score-low';

                tableHTML += `
                    <tr>
                        <td>${date}</td>
                        <td>${item.employee_code}</td>
                        <td>${item.department}</td>
                        <td>
                            <span class="score-badge ${scoreClass}">
                                ${item.total_score}ç‚¹
                            </span>
                        </td>
                        <td>
                            <button class="view-btn" onclick="viewDetail('${item.result_id}')">
                                è©³ç´°ã‚’è¦‹ã‚‹
                            </button>
                        </td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            container.innerHTML = tableHTML;
        }

        function viewDetail(resultId) {
            // è¨ºæ–­çµæœãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
            window.open(`/?result=${resultId}`, '_blank');
        }
    </script>
</body>
</html>
